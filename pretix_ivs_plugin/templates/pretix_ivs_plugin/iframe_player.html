<!DOCTYPE html>
<html>
<head>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: black; overflow: hidden; }
        #video-player { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <script src="https://player.live-video.net/1.16.0/amazon-ivs-player.min.js"></script>
    <video id="video-player" controls playsinline></video>
    <script>
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const streamUrl = urlParams.get('url');

            function init() {
                if (typeof IVSPlayer === 'undefined') {
                    console.error("IVS library not found");
                    return;
                }
                const PlayerFactory = IVSPlayer.create ? IVSPlayer : window.IVSPlayer;
            
                if (PlayerFactory.isPlayerSupported && streamUrl) {
                    const player = IVSPlayer.create({
                        optimizeBackgroundPlayback: { enabled: true }
                    });
                    player.attachHTMLVideoElement(document.getElementById('video-player'));
                    console.log("Loading Stream URL:", streamUrl);
                    player.load(streamUrl);
                    player.play();
                }
            }

            if (document.readyState === 'complete') {
                init();
            } else {
                window.addEventListener('load', init);
            }
        })();
    </script>
</body>
</html>
